<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Photos de Laura</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
   
  <style>
    body {
  margin: 0;
  font-family: Helvetica, Arial, sans-serif;
  background-color: #f0f2f5;
}

h2 {
  font-size: 24px;
}

/* Onglets */
.nav-tabs .nav-link {
  font-weight: 500;
  color: #050505;
  border: none;
  border-bottom: 2px solid transparent;
}

.nav-tabs .nav-link.active {
  color: #1877f2;
  border-color: #1877f2;
  background-color: transparent;
}

/* Cartes photo */
.photo-card {
  position: relative;
  cursor: zoom-in;
  transition: transform 0.2s ease;
}

.photo-card:hover {
  transform: scale(1.02);
}

.photo-card img {
  border-radius: 6px;
  aspect-ratio: 1 / 1;
  object-fit: cover;
}
.photo-card .caption {
  font-size: 13px;
  color: #6c757d;
  text-align: center;
  margin-top: 4px;
}


/* Aperçu lors de l’ajout */
#preview img {
  max-width: 100%;
  max-height: 200px;
  margin-top: 10px;
  border-radius: 6px;
}

/* Responsive ajusté */
@media (max-width: 576px) {
  h2 {
    font-size: 20px;
  }
}

  </style>

</head>
<body class="bg-light">

  <div class="container py-4">

    <!-- Barre supérieure -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="mb-0">Photos</h2>
      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#uploadModal">
            Ajouter des photos/vidéos
            </button>

    </div>

    <!-- Onglets Photos -->
    <ul class="nav nav-tabs mb-3" id="photoTabs">
      <li class="nav-item">
        <a class="nav-link active" href="#" data-tab="all">Photos de vous</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#" data-tab="albums">Albums</a>
      </li>
    </ul>

    <!-- Section Grille Photos -->
    <div id="photo-grid" class="row g-3">
      <div class="col-6 col-md-4 col-lg-3 photo-card">
       <img src="/assets/image/mangas.png" data-src="photo1.jpg" class="img-fluid rounded" alt="photo 1" />

      </div>
      <div class="col-6 col-md-4 col-lg-3 photo-card">
        <img src="/assets/image/jjk.png" data-src="photo2.jpg" class="img-fluid rounded" alt="photo 2" />
      </div>
      <div class="col-6 col-md-4 col-lg-3 photo-card">
        <img src="/assets/image/mangas1.png" data-src="photo3.jpg" class="img-fluid rounded" alt="photo 3" />
      </div>
      <!-- Ajoute autant d’images que nécessaire -->
    </div>

    <!-- Section Albums (optionnelle pour plus tard) -->
    <div id="album-section" class="d-none">
      <div class="alert alert-info">Aucun album pour le moment.</div>
    </div>

  </div>
  <!-- Visionneuse photo -->
<div class="modal fade" id="photoModal" tabindex="-1" aria-labelledby="photoModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content bg-dark">
      <div class="modal-body p-0">
        <img src="" alt="agrandi" id="modalImage" class="img-fluid w-100" />
      </div>
    </div>
  </div>
</div>
<!-- Modale d'ajout -->
<div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="uploadForm">
        <div class="modal-header">
          <h5 class="modal-title">Ajouter une photo ou vidéo</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
        </div>
        <div class="modal-body">
          <input type="text" id="usernameInput" class="form-control mb-3" placeholder="Nom d'utilisateur" required />
          <input type="file" id="mediaInput" accept="image/*,video/*" class="form-control mb-3" required />
          <div id="preview" class="text-center"></div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Ajouter</button>
        </div>
      </form>
    </div>
  </div>
</div>



<!-- Script Bootstrap -->
 <script>
   document.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll("#photoTabs .nav-link");
  const photoGrid = document.getElementById("photo-grid");
  const albumSection = document.getElementById("album-section");

  // Gestion des onglets
  tabs.forEach(tab => {
    tab.addEventListener("click", (e) => {
      e.preventDefault();
      tabs.forEach(t => t.classList.remove("active"));
      tab.classList.add("active");

      const tabName = tab.dataset.tab;
      photoGrid.classList.toggle("d-none", tabName !== "all");
      albumSection.classList.toggle("d-none", tabName === "all");
    });
  });

  // Visionneuse Bootstrap
  const modal = new bootstrap.Modal(document.getElementById("photoModal"));
  const modalImg = document.getElementById("modalImage");

  function bindModalToImage(img) {
    img.addEventListener("click", () => {
      modalImg.setAttribute("src", img.getAttribute("data-src"));
      modal.show();
    });
  }

  document.querySelectorAll(".photo-card img").forEach(bindModalToImage);

  // Ajout de photo par utilisateur
  const uploadForm = document.getElementById("uploadForm");
  const mediaInput = document.getElementById("mediaInput");
  const usernameInput = document.getElementById("usernameInput");
  const preview = document.getElementById("preview");

  mediaInput.addEventListener("change", () => {
    const file = mediaInput.files[0];
    preview.innerHTML = "";

    if (file && file.type.startsWith("image/")) {
      const img = document.createElement("img");
      img.src = URL.createObjectURL(file);
      img.alt = "aperçu";
      preview.appendChild(img);
    } else {
      preview.innerHTML = "<div class='text-muted'>Prévisualisation non disponible</div>";
    }
  });

  uploadForm.addEventListener("submit", (e) => {
    e.preventDefault();

    const file = mediaInput.files[0];
    const username = usernameInput.value.trim();
    if (!file || !username) return;

    const reader = new FileReader();
    reader.onload = () => {
      const col = document.createElement("div");
      col.className = "col-6 col-md-4 col-lg-3 photo-card";

      const img = document.createElement("img");
      img.src = reader.result;
      img.alt = `Photo de ${username}`;
      img.className = "img-fluid rounded";
      img.setAttribute("data-src", reader.result);

      const caption = document.createElement("div");
      caption.className = "caption text-center text-muted small mt-1";
      caption.textContent = `Ajouté par ${username}`;

      col.appendChild(img);
      col.appendChild(caption);
      photoGrid.prepend(col);

      bindModalToImage(img);

      uploadForm.reset();
      preview.innerHTML = "";
      bootstrap.Modal.getInstance(document.getElementById("uploadModal")).hide();
    };

    reader.readAsDataURL(file);
  });
});

 </script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
