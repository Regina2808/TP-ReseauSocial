<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Profil - Réseau Social</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    

    <style>
          :root {
            --primary-color: #1b74e4;
            --secondary-color: #e4e6eb;
            --bg-color: #f0f2f5;
            --text-color: #050505;
            --text-secondary: #65676b;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        
        .profile-header {
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .cover-photo {
            height: 350px;
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            position: relative;
            background-size: cover;
            background-position: center;
        }
        
        .profile-pic-container {
            position: relative;
            margin-top: -75px;
            z-index: 2;
        }
        
        .profile-pic {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 5px solid white;
            object-fit: cover;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .profile-pic:hover {
            transform: scale(1.05);
        }
        
        .profile-name {
            font-size: 32px;
            font-weight: 700;
            margin: 10px 0 5px;
        }
        
        .friends-count {
            color: var(--text-secondary);
            font-size: 15px;
        }
        
        .nav-tabs .nav-link {
            font-weight: 600;
            color: var(--text-secondary);
            padding: 15px 20px;
            border: none;
        }
        
        .nav-tabs .nav-link.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }
        
        .content-section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-color);
        }
        
        .info-item {
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
        }
        
        .info-item:last-child {
            border-bottom: none;
        }
        
        .edit-btn {
            color: var(--primary-color);
            cursor: pointer;
            font-weight: 600;
            background: none;
            border: none;
            padding: 0;
        }
        
        .edit-btn:hover {
            text-decoration: underline;
        }
        
        .post {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .post-content {
            margin: 15px 0;
            line-height: 1.5;
        }
        
        .post-actions .btn {
            color: var(--text-secondary);
            font-weight: 600;
        }
        
        .post-actions .btn:hover {
            background: #f0f2f5;
        }
        
        .form-edit {
            display: none;
            margin-top: 10px;
        }
        
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .photo-item {
            height: 120px;
            background: #e9ebee;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s;
            background-size: cover;
            background-position: center;
        }
        
        .photo-item:hover {
            transform: scale(1.02);
        }
        
        .floating-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s;
        }
        
        .floating-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        }

        /* Style pour les modales de sélection de photos */
        .photo-selection {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .selectable-photo {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .selectable-photo:hover {
            border-color: var(--primary-color);
            transform: scale(1.03);
        }

        .selectable-photo.selected {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(27, 116, 228, 0.3);
        }
        /* Style pour le textarea de la bio */
            #bioInput {
                resize: vertical; /* Permet le redimensionnement vertical seulement */
                min-height: 80px;
            }

            /* Style pour l'affichage de la bio */
            #bioInfo {
                white-space: pre-wrap; /* Conserve les sauts de ligne */
                word-break: break-word; /* Empêche le débordement du texte */
            }
    </style>



</head>

<body>
    <div class="container py-4">
        <!-- En-tête du profil -->
        <div class="profile-header">
            <div class="cover-photo" id="coverPhoto" style="background-image: url('https://images.unsplash.com/photo-1497366754035-f200968a6e72?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80')">
                <button class="btn btn-light position-absolute top-2 end-2" onclick="showCoverPhotoModal()">
                    <i class="fas fa-camera me-1"></i> Modifier
                </button>
            </div>
            
            <div class="px-4">
                <div class="profile-pic-container d-flex justify-content-between align-items-end">
                    <div>
                        <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Photo de profil" class="profile-pic" id="profilePic" onclick="changeProfilePicture()">
                    </div>
                    <div class="mb-3">
                        <button class="btn btn-primary me-2">
                            <i class="fas fa-plus me-1"></i> Ajouter à la story
                        </button>
                        <button class="btn btn-secondary">
                            <i class="fas fa-pen me-1"></i> Modifier le profil
                        </button>
                    </div>
                </div>
                
                <h1 class="profile-name" id="profileName">Laura Adh</h1>
                <div class="friends-count">1,7 K ami(e)s</div>
                
                <!-- Onglets de navigation -->
                <ul class="nav nav-tabs mt-3" id="profileTabs">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" href="#posts">Publications</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="#" onclick="showAboutModal()">À propos</a>

                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="/vues/friend.html">Ami(e)s</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="profile.html">Photos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#more">Plus <i class="fas fa-caret-down"></i></a>
                    </li>
                </ul>
            </div>
        </div>
        
        <!-- Contenu principal -->
        <div class="row">
            <!-- Colonne de gauche -->
            <div class="col-lg-4">
                <!-- Section Intro -->
                <div class="content-section">
                    <h2 class="section-title">Intro</h2>
                        <div class="info-item">
                            <i class="fas fa-pencil-alt me-2"></i>
                            <span id="bioInfo">Modifier bio</span>
                            <button class="edit-btn ms-auto" onclick="toggleEditForm('bioForm')">
                                <i class="fas fa-pen"></i>
                            </button>
                        </div>
                        <form class="form-edit" id="bioForm">
                            <div class="mb-3">
                                <textarea class="form-control" id="bioInput" rows="3">Weiss</textarea>
                            </div>
                            <button type="button" class="btn btn-primary btn-sm" onclick="saveInfo('bioInfo', 'bioInput', 'bioForm')">Enregistrer</button>
                            <button type="button" class="btn btn-secondary btn-sm" onclick="toggleEditForm('bioForm')">Annuler</button>
                        </form>
                    <div class="info-item">
                        <i class="fas fa-briefcase me-2"></i>
                        <span id="jobInfo">Employé, à son compte</span>
                        <button class="edit-btn ms-auto" onclick="toggleEditForm('jobForm')">
                            <i class="fas fa-pen"></i>
                        </button>
                    </div>
                    <form class="form-edit" id="jobForm">
                        <div class="mb-3">
                            <input type="text" class="form-control" id="jobInput" value="Employé, à son compte">
                        </div>
                        <button type="button" class="btn btn-primary btn-sm" onclick="saveInfo('jobInfo', 'jobInput', 'jobForm')">Enregistrer</button>
                        <button type="button" class="btn btn-secondary btn-sm" onclick="toggleEditForm('jobForm')">Annuler</button>
                    </form>
                    
                    <div class="info-item">
                        <i class="fas fa-graduation-cap me-2"></i>
                        <span id="educationInfo">A étudié à Collège Catholique St Michel de Cotonou</span>
                        <button class="edit-btn ms-auto" onclick="toggleEditForm('educationForm')">
                            <i class="fas fa-pen"></i>
                        </button>
                    </div>
                    <form class="form-edit" id="educationForm">
                        <div class="mb-3">
                            <input type="text" class="form-control" id="educationInput" value="A étudié à Collège Catholique St Michel de Cotonou">
                        </div>
                        <button type="button" class="btn btn-primary btn-sm" onclick="saveInfo('educationInfo', 'educationInput', 'educationForm')">Enregistrer</button>
                        <button type="button" class="btn btn-secondary btn-sm" onclick="toggleEditForm('educationForm')">Annuler</button>
                    </form>
                    
                    <div class="info-item">
                        <i class="fas fa-home me-2"></i>
                        <span id="cityInfo">Habite à Cotonou</span>
                        <button class="edit-btn ms-auto" onclick="toggleEditForm('cityForm')">
                            <i class="fas fa-pen"></i>
                        </button>
                    </div>
                    <form class="form-edit" id="cityForm">
                        <div class="mb-3">
                            <input type="text" class="form-control" id="cityInput" value="Habite à Cotonou">
                        </div>
                        <button type="button" class="btn btn-primary btn-sm" onclick="saveInfo('cityInfo', 'cityInput', 'cityForm')">Enregistrer</button>
                        <button type="button" class="btn btn-secondary btn-sm" onclick="toggleEditForm('cityForm')">Annuler</button>
                    </form>
                    
                    <div class="info-item">
                        <i class="fas fa-heart me-2"></i>
                        <span id="statusInfo">Célibataire</span>
                        <button class="edit-btn ms-auto" onclick="toggleEditForm('statusForm')">
                            <i class="fas fa-pen"></i>
                        </button>
                    </div>
                    <form class="form-edit" id="statusForm">
                        <div class="mb-3">
                            <select class="form-select" id="statusInput">
                                <option value="Célibataire">Célibataire</option>
                                <option value="En couple">En couple</option>
                                <option value="Marié(e)">Marié(e)</option>
                            </select>
                        </div>
                        <button type="button" class="btn btn-primary btn-sm" onclick="saveInfo('statusInfo', 'statusInput', 'statusForm')">Enregistrer</button>
                        <button type="button" class="btn btn-secondary btn-sm" onclick="toggleEditForm('statusForm')">Annuler</button>
                    </form>

                    <div class="info-item">
                        <i class="fas fa-birthday-cake me-2"></i>
                        <span id="birthdayInfo">Né(e) le 15 janvier 1990</span>
                        <button class="edit-btn ms-auto" onclick="toggleEditForm('birthdayForm')">
                            <i class="fas fa-pen"></i>
                        </button>
                    </div>
                    <form class="form-edit" id="birthdayForm">
                        <div class="mb-3">
                            <input type="date" class="form-control" id="birthdayInput" value="1990-01-15">
                        </div>
                        <button type="button" class="btn btn-primary btn-sm" onclick="saveInfo('birthdayInfo', 'birthdayInput', 'birthdayForm')">Enregistrer</button>
                        <button type="button" class="btn btn-secondary btn-sm" onclick="toggleEditForm('birthdayForm')">Annuler</button>
                    </form>
                        <div class="info-item">
                            <i class="fas fa-star me-2"></i>
                            <span id="featuredContent">Contenu à la une</span>
                            <button class="edit-btn ms-auto" onclick="toggleEditForm('featuredForm')">
                                <i class="fas fa-pen"></i>
                            </button>
                        </div>
                        <form class="form-edit" id="featuredForm">
                            <div class="mb-3">
                                <select class="form-select" id="featuredInput">
                                    <option value="">-- Sélectionner un contenu --</option>
                                    <option value="post1">Publication: "La femme de ta vie"</option>
                                    <option value="photo1">Photo: Vacances à la plage</option>
                                    <option value="video1">Vidéo: Mon voyage</option>
                                </select>
                            </div>
                            <button type="button" class="btn btn-primary btn-sm" onclick="saveInfo('featuredContent', 'featuredInput', 'featuredForm')">Enregistrer</button>
                            <button type="button" class="btn btn-secondary btn-sm" onclick="toggleEditForm('featuredForm')">Annuler</button>
                        </form>
                    
                    <div class="info-item">
                        <i class="fas fa-user-friends me-2"></i>
                        <span>Suivi(s) par 11 305 personnes</span>
                    </div>
                </div>
                
                <!-- Section Photos -->
                <div class="content-section">
                    <h2 class="section-title">Photos</h2>
                    <div class="photo-grid" id="photoGrid">
                        <!-- Les photos seront ajoutées dynamiquement ici -->
                    </div>
                    <button class="btn btn-link p-0 mt-2" onclick="showAllPhotos()">Voir toutes les photos</button>
                </div>
            </div>
            
            <!-- Colonne de droite (Publications) -->
            <div class="col-lg-8">
                <!-- Créer une publication -->
                <div class="content-section mb-4" id="createPostSection">
                    <div class="d-flex align-items-center mb-3">
                        <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Photo de profil" class="rounded-circle me-2" width="40" height="40">
                        <input type="text" class="form-control rounded-pill" id="postInput" placeholder="Quoi de neuf, Laura ?" onclick="showPostOptions()">
                    </div>
                    <div class="d-flex justify-content-between border-top pt-3" id="postOptions" style="display: none;">
                        <button class="btn btn-light" onclick="addMedia('video')">
                            <i class="fas fa-video text-danger me-1"></i> Vidéo en direct
                        </button>
                        <button class="btn btn-light" onclick="addMedia('photo')">
                            <i class="fas fa-images text-success me-1"></i> Photo/Video
                        </button>
                        <button class="btn btn-light" onclick="addMedia('mood')">
                            <i class="fas fa-smile text-warning me-1"></i> Humeur
                        </button>
                    </div>
                    <div id="postMediaPreview" class="mt-3" style="display: none;"></div>
                    <div class="d-flex justify-content-end mt-3" id="postButtonContainer" style="display: none;">
                        <button class="btn btn-primary" onclick="createPost()">Publier</button>
                    </div>
                </div>
                
                <!-- Conteneur des publications -->
                <div id="postsContainer">
                    <!-- Les publications seront ajoutées dynamiquement ici -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bouton flottant -->
    
    <div class="floating-btn" data-bs-toggle="tooltip" title="Créer une publication" onclick="showPostModal()">
        <i class="fas fa-pen"></i>
    </div>
    
    <!-- Modal pour changer la photo de profil -->
    <div class="modal fade" id="profilePicModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Changer la photo de profil</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6>Choisir parmi nos photos par défaut :</h6>
                    <div class="photo-selection" id="profilePicSelection">
                        <!-- Les options seront ajoutées dynamiquement -->
                    </div>
                    <hr>
                    <div class="d-grid gap-2">
                        <button class="btn btn-outline-primary" onclick="document.getElementById('profilePicUpload').click()">
                            <i class="fas fa-upload me-2"></i> Télécharger une photo
                        </button>
                        
                        <input type="file" id="profilePicUpload" accept="image/*" style="display: none;" onchange="uploadProfilePicture(this)">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal pour changer la photo de couverture -->
    <div class="modal fade" id="coverPhotoModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Changer la photo de couverture</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6>Choisir parmi nos photos par défaut :</h6>
                    <div class="photo-selection" id="coverPhotoSelection">
                        <!-- Les options seront ajoutées dynamiquement -->
                    </div>
                    <hr>
                    <div class="d-grid gap-2">
                        <button class="btn btn-outline-primary" onclick="document.getElementById('coverPhotoUpload').click()">
                            <i class="fas fa-upload me-2"></i> Télécharger une photo
                        </button>
                        <!-- fonction  uploadCoverPhoto manquant -->
                        <input type="file" id="coverPhotoUpload" accept="image/*" style="display: none;" onchange="uploadCoverPhoto(this)">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal pour créer une publication -->
    <div class="modal fade" id="createPostModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Créer une publication</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="d-flex align-items-center mb-3">
                        <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Photo de profil" class="rounded-circle me-2" width="40" height="40">
                        <div>
                            <h6 class="mb-0 fw-bold" id="modalProfileName">Laura Adh</h6>
                            <select class="form-select form-select-sm mt-1" style="width: auto; display: inline-block;">
                                <option><i class="fas fa-globe-americas"></i> Public</option>
                                <option>Amis</option>
                                <option>Moi uniquement</option>
                            </select>
                        </div>
                    </div>
                    
                    <textarea class="form-control border-0 mb-3" rows="5" placeholder="Quoi de neuf, Laura ?" style="font-size: 1.5rem; resize: none;"></textarea>
                    
                    <div class="border rounded-3 p-3 mb-3">
                        <div class="d-flex justify-content-between mb-2">
                            <span>Ajouter à votre publication</span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <button class="btn btn-light rounded-pill">
                                <i class="fas fa-images text-success me-1"></i> Photo/Video
                            </button>
                            <button class="btn btn-light rounded-pill">
                                <i class="fas fa-user-tag text-primary me-1"></i> Personne
                            </button>
                            <button class="btn btn-light rounded-pill">
                                <i class="fas fa-smile text-warning me-1"></i> Humeur
                            </button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary w-100" disabled>Publier</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Galerie photo modale -->
    <div id="galleryModal" class="modal-gallery">
        <span class="close-gallery" onclick="closeGallery()">&times;</span>
        <img class="modal-gallery-content" id="galleryImage">
        <div id="galleryCaption"></div>
    </div>

    <!-- Toutes les photos -->
    <div id="allPhotosModal" class="modal-gallery" style="padding-top: 50px;">
        <span class="close-gallery" onclick="closeAllPhotos()">&times;</span>
        <h3 style="color: white; text-align: center; margin-bottom: 20px;">Toutes mes photos</h3>
        <div class="gallery-container" id="allPhotosContainer">
            <!-- Les photos seront ajoutées dynamiquement ici -->
        </div>
    </div>
        <!-- Modal À propos -->
        <div class="modal fade" id="aboutModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">À propos</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
            </div>
            <div class="modal-body" id="aboutModalContent">
                <!-- Le contenu de about.html sera chargé ici -->
                <div class="text-center">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Chargement...</span>
                </div>
                </div>
            </div>
            </div>
        </div>
        </div>

        <script>
            // Gestion spécifique des onglets pour la page profil
            document.addEventListener('DOMContentLoaded', function() {
                // Activer l'onglet Publications si nécessaire
                if (window.location.hash === '#posts' || localStorage.getItem('activeTab') === '#posts') {
                    const tabTrigger = document.querySelector('a[href="#posts"]');
                    if (tabTrigger) {
                        const tab = new bootstrap.Tab(tabTrigger);
                        tab.show();
                        
                        // Faire défiler vers la section
                        document.querySelector('#posts').scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                    localStorage.removeItem('activeTab');
                }
            });


            // Données des photos par défaut
const defaultProfilePics = [
    "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
    "https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
    "https://images.unsplash.com/photo-1554151228-14d9def656e4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
    "https://images.unsplash.com/photo-1542206395-9feb3edaa68d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
];

const defaultCoverPhotos = [
    "https://images.unsplash.com/photo-1497366754035-f200968a6e72?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
    "https://images.unsplash.com/photo-1500382017468-9049fed747ef?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
    "https://images.unsplash.com/photo-1490730141103-6cac27aaab94?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
    "https://images.unsplash.com/photo-1501785888041-af3ef285b470?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
];

// Photos fixes de la galerie
const galleryPhotos = [
    "https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
    "https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
    "https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
    "https://images.unsplash.com/photo-1524504388940-b1c1722653e1?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
    "https://images.unsplash.com/photo-1528892952291-009c663ce843?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
    "https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
];

// Données des publications
let posts = [
    {
        id: 1,
        author: "Laura Adh",
        authorPic: "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
        date: "22 juillet 2022",
        content: "Si c'est pour avoir la femme de ta vie, que tu veux devenir riche à tout prix. Sache que même avec la richesse, tu es un homme pauvre 😊 ! La femme de ta vie, ça pas besoin de ta richesse. Mais de toi-même, de tout ce qui viendra de toi et qui la fera sentir femme. Ce sont ces paresseuses qui ne veulent rien faire qui veulent à tout prix rester avec des hommes riches. Sinon la femme n'a pas besoin d'un homme riche avant de vivre le vrai amour 😊.",
        likes: 175,
        comments: [
            {
                author: "Joinnia Hgb",
                authorPic: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                date: "5 min",
                content: "Tout à fait d'accord avec toi !"
            }
        ]
    }
];

// Fonction pour basculer l'affichage des formulaires d'édition
function toggleEditForm(formId) {
    const form = document.getElementById(formId);
    form.style.display = form.style.display === 'block' ? 'none' : 'block';
}

// Fonction pour sauvegarder les informations modifiées
function saveInfo(infoId, inputId, formId) {
    const infoElement = document.getElementById(infoId);
    const inputElement = document.getElementById(inputId);
    
    // Cas spécial pour la bio
    if (inputId === 'bioInput') {
        infoElement.innerHTML = inputElement.value.replace(/\n/g, '<br>');
    }
    // Cas spécial pour le contenu à la une
    else if (inputId === 'featuredInput') {
        updateFeaturedContent();
        return;
    }
    // Formatage spécial pour la date de naissance
    else if (inputId === 'birthdayInput') {
        const date = new Date(inputElement.value);
        const options = { day: 'numeric', month: 'long', year: 'numeric' };
        infoElement.textContent = "Né(e) le " + date.toLocaleDateString('fr-FR', options);
    } else {
        infoElement.textContent = inputElement.value;
    }
    
    toggleEditForm(formId);
    
    // Animation de confirmation
    infoElement.style.color = '#1b74e4';
    setTimeout(() => {
        infoElement.style.color = '';
    }, 1000);
}

// Fonction pour mettre à jour le contenu à la une
function updateFeaturedContent() {
    const featuredValue = document.getElementById('featuredInput').value;
    let displayText = "Aucun contenu sélectionné";
    
    switch(featuredValue) {
        case 'post1':
            displayText = "Publication: \"La femme de ta vie\"";
            break;
        case 'photo1':
            displayText = "Photo: Vacances à la plage";
            break;
        case 'video1':
            displayText = "Vidéo: Mon voyage";
            break;
    }
    
    document.getElementById('featuredContent').textContent = displayText;
    toggleEditForm('featuredForm');
}

// Fonctions pour la gestion des photos de profil et de couverture
function changeProfilePicture() {
    const modal = new bootstrap.Modal(document.getElementById('profilePicModal'));
    
    const container = document.getElementById('profilePicSelection');
    container.innerHTML = '';
    
    defaultProfilePics.forEach((pic, index) => {
        const img = document.createElement('img');
        img.src = pic;
        img.className = 'selectable-photo';
        img.onclick = function() {
            document.querySelectorAll('#profilePicSelection img').forEach(img => {
                img.classList.remove('selected');
            });
            
            img.classList.add('selected');
            document.getElementById('profilePic').src = pic;
            
            setTimeout(() => {
                modal.hide();
            }, 1000);
        };
        container.appendChild(img);
    });
    
    modal.show();
}


document.addEventListener('DOMContentLoaded', () => {
function showCoverPhotoModal() {
    const modal = new bootstrap.Modal(document.getElementById('coverPhotoModal'));
    
    const container = document.getElementById('coverPhotoSelection');
    container.innerHTML = '';
    
    defaultCoverPhotos.forEach((pic, index) => {
        const img = document.createElement('img');
        img.src = pic;
        img.className = 'selectable-photo';
        img.onclick = function() {
            document.querySelectorAll('#coverPhotoSelection img').forEach(img => {
                img.classList.remove('selected');
            });
            
            img.classList.add('selected');
            document.getElementById('coverPhoto').style.backgroundImage = `url(${pic})`;
            
            setTimeout(() => {
                modal.hide();
            }, 1000);
        };
        container.appendChild(img);
    });
    
    modal.show();
}
});
function showCoverPhotoModal() {
    const modal = new bootstrap.Modal(document.getElementById('coverPhotoModal'));
    
    const container = document.getElementById('coverPhotoSelection');
    container.innerHTML = '';
    
    defaultCoverPhotos.forEach((pic, index) => {
        const img = document.createElement('img');
        img.src = pic;
        img.className = 'selectable-photo';
        img.onclick = function() {
            document.querySelectorAll('#coverPhotoSelection img').forEach(img => {
                img.classList.remove('selected');
            });
            
            img.classList.add('selected');
            document.getElementById('coverPhoto').style.backgroundImage = `url(${pic})`;
            
            setTimeout(() => {
                modal.hide();
            }, 1000);
        };
        container.appendChild(img);
    });
    
    modal.show();
}

function uploadProfilePicture(input) {
    if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('profilePic').src = e.target.result;
            const modal = bootstrap.Modal.getInstance(document.getElementById('profilePicModal'));
            modal.hide();
        }
        reader.readAsDataURL(input.files[0]);
    }
}

function uploadCoverPhoto(input) {
    if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('coverPhoto').style.backgroundImage = `url(${e.target.result})`;
            const modal = bootstrap.Modal.getInstance(document.getElementById('coverPhotoModal'));
            modal.hide();
        }
        reader.readAsDataURL(input.files[0]);
    }
}

// Fonctions pour les publications
function showPostOptions() {
    document.getElementById('postOptions').style.display = 'flex';
}

function showPostModal() {
    const modal = new bootstrap.Modal(document.getElementById('createPostModal'));
    modal.show();
}

function addMedia(type) {
    const preview = document.getElementById('postMediaPreview');
    preview.innerHTML = '';
    preview.style.display = 'block';
    
    if (type === 'photo') {
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = 'image/*';
        fileInput.style.display = 'none';
        fileInput.onchange = function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const img = document.createElement('img');
                    img.src = event.target.result;
                    img.style.maxWidth = '100%';
                    img.style.borderRadius = '8px';
                    preview.innerHTML = '';
                    preview.appendChild(img);
                    document.getElementById('postButtonContainer').style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        };
        document.body.appendChild(fileInput);
        fileInput.click();
        document.body.removeChild(fileInput);
    } else if (type === 'video') {
        preview.innerHTML = '<div class="alert alert-info">Fonctionnalité vidéo en développement</div>';
        document.getElementById('postButtonContainer').style.display = 'block';
    } else if (type === 'mood') {
        preview.innerHTML = `
            <select class="form-select">
                <option>😊 Heureux</option>
                <option>😢 Triste</option>
                <option>😡 En colère</option>
                <option>😍 Amoureux</option>
                <option>🤔 Pensif</option>
            </select>
        `;
        document.getElementById('postButtonContainer').style.display = 'block';
    }
}

function createPost() {
    const postContent = document.getElementById('postInput').value;
    const mediaPreview = document.getElementById('postMediaPreview').innerHTML;
    
    if (!postContent && !mediaPreview) return;
    
    const newPost = {
        id: posts.length + 1,
        author: document.getElementById('profileName').textContent,
        authorPic: document.getElementById('profilePic').src,
        date: new Date().toLocaleDateString('fr-FR', { day: 'numeric', month: 'long', year: 'numeric' }),
        content: postContent,
        media: mediaPreview,
        likes: 0,
        comments: []
    };
    
    posts.unshift(newPost);
    renderPosts();
    
    // Réinitialiser le formulaire
    document.getElementById('postInput').value = '';
    document.getElementById('postMediaPreview').innerHTML = '';
    document.getElementById('postMediaPreview').style.display = 'none';
    document.getElementById('postButtonContainer').style.display = 'none';
    document.getElementById('postOptions').style.display = 'none';
}

function renderPosts() {
    const container = document.getElementById('postsContainer');
    container.innerHTML = '';
    
    posts.forEach(post => {
        const postElement = document.createElement('div');
        postElement.className = 'content-section post-item';
        postElement.innerHTML = `
            <div class="d-flex justify-content-between align-items-center mb-3">
                <div class="d-flex align-items-center">
                    <img src="${post.authorPic}" alt="Photo de profil" class="rounded-circle me-2" width="40" height="40">
                    <div>
                        <h6 class="mb-0 fw-bold">${post.author}</h6>
                        <small class="text-muted">${post.date} · <i class="fas fa-globe-americas"></i></small>
                    </div>
                </div>
                <div class="dropdown">
                    <button class="btn btn-link text-muted" data-bs-toggle="dropdown">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Enregistrer</a></li>
                        <li><a class="dropdown-item" href="#">Modifier</a></li>
                        <li><a class="dropdown-item" href="#" onclick="deletePost(${post.id})">Supprimer</a></li>
                    </ul>
                </div>
            </div>
            
            ${post.content ? `<div class="post-content mb-3">${post.content.replace(/\n/g, '<br>')}</div>` : ''}
            ${post.media ? `<div class="mb-3">${post.media}</div>` : ''}
            
            <div class="d-flex justify-content-between border-top border-bottom py-2 mb-3">
                <button class="btn btn-light reaction-btn">
                    <i class="fas fa-thumbs-up me-1"></i> J'adore (${post.likes})
                </button>
                <button class="btn btn-light reaction-btn">
                    <i class="fas fa-comment me-1"></i> Commenter
                </button>
                <button class="btn btn-light reaction-btn">
                    <i class="fas fa-share me-1"></i> Partager
                </button>
            </div>
            
            <div class="d-flex align-items-center mb-3">
                <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Photo de profil" class="rounded-circle me-2" width="32" height="32">
                <div class="input-group">
                    <input type="text" class="form-control rounded-pill" placeholder="Écrire un commentaire...">
                </div>
            </div>
            
            ${post.comments.map(comment => `
                <div class="comment d-flex align-items-start mb-3">
                    <img src="${comment.authorPic}" alt="Photo de profil" class="rounded-circle me-2" width="32" height="32">
                    <div class="bg-light p-2 rounded-3 flex-grow-1">
                        <div class="d-flex justify-content-between">
                            <h6 class="mb-0 fw-bold">${comment.author}</h6>
                            <small class="text-muted">${comment.date}</small>
                        </div>
                        <p class="mb-0">${comment.content}</p>
                    </div>
                </div>
            `).join('')}
            
            ${post.comments.length > 1 ? `
                <a href="#" class="d-block text-center text-muted mb-2">
                    <small>Voir plus de commentaires</small>
                </a>
            ` : ''}
        `;
        
        container.appendChild(postElement);
    });
}

function deletePost(postId) {
    posts = posts.filter(post => post.id !== postId);
    renderPosts();
}

// Fonctions pour la galerie photo
function openGallery(index) {
    const modal = document.getElementById('galleryModal');
    const img = document.getElementById('galleryImage');
    img.src = galleryPhotos[index];
    modal.style.display = "block";
}

function closeGallery() {
    document.getElementById('galleryModal').style.display = "none";
}

function showAllPhotos() {
    const container = document.getElementById('allPhotosContainer');
    container.innerHTML = '';
    
    galleryPhotos.forEach((photo, index) => {
        const img = document.createElement('img');
        img.src = photo;
        img.className = 'gallery-item';
        img.onclick = function() { openGallery(index); };
        container.appendChild(img);
    });
    
    document.getElementById('allPhotosModal').style.display = "block";
}

function closeAllPhotos() {
    document.getElementById('allPhotosModal').style.display = "none";
}

// Initialisation de la page
document.addEventListener('DOMContentLoaded', function() {
    // Initialiser les tooltips Bootstrap
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.map(function(tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
    
    // Remplir le nom dans le modal avec le nom du profil
    document.getElementById('modalProfileName').textContent = document.getElementById('profileName').textContent;
    
    // Initialisation de la bio si elle est vide
    if (!document.getElementById('bioInfo').textContent.trim()) {
        document.getElementById('bioInfo').textContent = "Weiss";
        document.getElementById('bioInput').value = "Weiss";
    }
    
    // Rendre les publications initiales
    renderPosts();
    
    // Activer la soumission de publication avec la touche Entrée
    document.getElementById('postInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            createPost();
        }
    });
    
    // Pré-remplir la grille de photos avec les photos fixes
    const photoGrid = document.getElementById('photoGrid');
    photoGrid.innerHTML = '';
    galleryPhotos.slice(0, 6).forEach((photo, index) => {
        const item = document.createElement('div');
        item.className = 'photo-item';
        item.style.backgroundImage = `url(${photo})`;
        item.onclick = function() { openGallery(index); };
        photoGrid.appendChild(item);
    });
        // Au chargement de la page profil
    document.addEventListener('DOMContentLoaded', function() {
        // Vérifier si on vient de la page À propos
        const activeTab = localStorage.getItem('activeTab');
        
        if (activeTab) {
            // Activer l'onglet correspondant
            const tabTrigger = document.querySelector(`a[href="${activeTab}"]`);
            if (tabTrigger) {
                const tab = new bootstrap.Tab(tabTrigger);
                tab.show();
            }
            
            // Nettoyer le localStorage
            localStorage.removeItem('activeTab');
        }
    });
    // ... (conservez tout votre code existant jusqu'à la fin) ...

// Initialisation de la page
document.addEventListener('DOMContentLoaded', function() {
    // Initialiser les tooltips Bootstrap
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.map(function(tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
    
    // Remplir le nom dans le modal avec le nom du profil
    document.getElementById('modalProfileName').textContent = document.getElementById('profileName').textContent;
    
    // Initialisation de la bio si elle est vide
    if (!document.getElementById('bioInfo').textContent.trim()) {
        document.getElementById('bioInfo').textContent = "Weiss";
        document.getElementById('bioInput').value = "Weiss";
    }
    
    // Rendre les publications initiales
    renderPosts();
    
    // Activer la soumission de publication avec la touche Entrée
    document.getElementById('postInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            createPost();
        }
    });
    
    // Pré-remplir la grille de photos avec les photos fixes
    const photoGrid = document.getElementById('photoGrid');
    photoGrid.innerHTML = '';
    galleryPhotos.slice(0, 6).forEach((photo, index) => {
        const item = document.createElement('div');
        item.className = 'photo-item';
        item.style.backgroundImage = `url(${photo})`;
        item.onclick = function() { openGallery(index); };
        photoGrid.appendChild(item);
    });

    // Gestion de l'onglet actif au chargement
    handleActiveTab();
});

// Fonction pour gérer l'onglet actif
function handleActiveTab() {
    // Vérifier le hash dans l'URL
    if (window.location.hash === '#posts') {
        activateTab('#posts');
    }
    
    // Vérifier le localStorage pour les redirections
    const activeTab = localStorage.getItem('activeTab');
    if (activeTab) {
        activateTab(activeTab);
        localStorage.removeItem('activeTab');
    }
}

// Fonction pour activer un onglet spécifique
function activateTab(tabId) {
    const tabTrigger = document.querySelector(`a[href="${tabId}"]`);
    if (tabTrigger) {
        const tab = new bootstrap.Tab(tabTrigger);
        tab.show();
        
        // Optionnel: Faire défiler vers la section
        document.querySelector(tabId).scrollIntoView({
            behavior: 'smooth'
        });
    }
}

function showAboutModal() {
    const modal = new bootstrap.Modal(document.getElementById('aboutModal'));
    document.getElementById('aboutModalContent').innerHTML = `
        <div class="text-center">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Chargement...</span>
          </div>
        </div>`;
    
    fetch('about.html')
        .then(response => response.text())
        .then(html => {
            // Extraire juste le contenu utile (dans le body )
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            const container = doc.querySelector('.about-container');
            if (container) {
                document.getElementById('aboutModalContent').innerHTML = container.outerHTML;
            } else {
                document.getElementById('aboutModalContent').innerHTML = "<p>Impossible de charger le contenu.</p>";
            }
        })
        .catch(error => {
            document.getElementById('aboutModalContent').innerHTML = "<p>Erreur de chargement du contenu.</p>";
            console.error("Erreur de chargement :", error);
        });

    modal.show();
}


});

     </script>

    <!-- Bootstrap JS et dépendances -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>   
</body>
</html>